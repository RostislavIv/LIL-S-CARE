@model IEnumerable<ProductsInBagDTO>
@{
}
<!-- Offcanvas Shopping Bag Start -->
<div class="offcanvas offcanvas-end" id="shopping-bag">
    <div class="offcanvas-header">
        <h2 class="offcanvas-title">Моята количка</h2>
        <button type="button"
                class="btn-close"
                data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
            <hr />
            <!-- Product in Shopping Bag Start -->
            @foreach (var product in Model)
            {
            <div class="d-flex justify-content-between id=" @product.Id"">
                    <div class="w-50">
                        <img src="@product.ImageUrl"
                             height="180px"
                             style="width: 100%; object-fit: cover"
                             alt="" />
                    </div>
                    <div class="w-50 fs-6 p-3">
                        <p>@product.Name</p>
                        <p>Цена: @product.Price лв.</p>
                        <p>Количество: @product.Quantity бр.</p>
                        
@*                         <div class="my-2">
                            <input type="number" class="form-control w-auto" value="@product.Quantity" min="1"
                                   max="999" display: flex; align-items: center; />
                        </div>
                        <a id="DeleteProduct" class="btn my-2" data-product-id="@product.Id"><i class="fa fa-trash-can me-2"></i> Изтрии</a> *@
                    </div>
                </div>
                <hr />
            }
            <!-- Product in Shopping Bag End -->

            <div class="fs-4 py-3">
                <span>Междинна сума :</span><span class="float-end">@ViewBag.Total лв.</span>
            </div>
@*             <a class="btn w-100">Преглед на количката</a> *@
    </div>
</div>
<!-- Offcanvas Shopping Bag End -->

@* <script>
    $(document).ready(function () {
        // Attach click event handler to DeleteProduct buttons
        $('#DeleteProduct').click(function () {
            var productId = $(this).data('product-id'); // Get product ID from data attribute
            // Send AJAX request to delete the product
            $.ajax({
                url: '/ShoppingBag/DeleteProductAsync',
                type: 'POST',
                data: { productId: productId },
                success: function (response) {
                    // Handle success response, maybe refresh the shopping bag component
                },
                error: function (xhr, status, error) {
                    // Handle error
                }
            });
        });
    });
</script> *@