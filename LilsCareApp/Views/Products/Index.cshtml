@model ProductsDTO
@{
    ViewData["Title"] = "Products";
}
@section Styles {
    <link rel="stylesheet" href="~/css/products.css" />
}

<div class="container-fluid product py-5">
    <h1 class="mb-4 text-center">ПРОДУКТИ</h1>
    <div class="row">
        <!-- Filter Categories Start-->
        <div class="col-lg-2 fs-5">
            <hr class="my-2" />
            <a class="nav-link toggle-sign"
               data-bs-toggle="collapse"
               href="#collapse-categories">
                <div class="d-flex ">
                    <span>+</span>
                    <h5 class="ms-4">Филтър</h5>
                </div>
            </a>
            <div id="collapse-categories" class="collapse show">
                <div class="form-check">
                    @foreach (var category in Model.Categories)
                    {
                        <a asp-controller="Products" asp-action="Index" asp-route-id="@category.Id">
                            <div class="nav-link mb-2">
                                <input
                                       class="form-check-input me-2"
                                       type="radio"
                                       name="category"
                                       value="@category.Id"
                                @(category.Id == ViewBag.CheckedId ? "checked" : "") />
                                <label class="form-check-label" for="category">@category.Name</label>
                            </div>
                        </a>
                    }
                </div>
            </div>
            <hr class="my-2" />
        </div>
        <!--Filter Categories End-->
        <div class="col-lg">
            <div class="row g-5 justify-content-center">

                @foreach (var product in Model.Products)
                {
                    <!-- Products Start-->
                    <div class="col-md-6 col-lg-4 col-xl-4">
                        <a class="nav-link" asp-controller="Details" asp-action="Index" asp-route-id="@product.Id
                        style="text-decoration: none; color: inherit">
                            <div class="rounded-4 position-relative product-item border">
                                <div class="product-img">
                                    <img src="@product.ImageUrl"
                                    class="img-fluid w-100"
                                    alt="" />
                                </div>
                                <div class="px-3 py-2">
                                    <h6>@product.Name</h6>
                                    <p class="fs-5 fw-bold mb-0">@product.Price лв.</p>
                                    <div class="clearfix mt-2">
                                        @if (product.Quantity > 0)
                                        {
                                            <a data-bs-toggle="offcanvas"
                                               data-bs-target="#shopping-bag">
                                                <a asp-controller="Products" asp-action="AddToCart" asp-route-id="@product.Id"
                                                   class="btn"
                                                   style="float: left">
                                                    <i class="fa fa-shopping-bag me-2"></i> Добави
                                                </a>
                                            </a>
                                        }
                                        else
                                        {
                                            <a class="float-start btn unactive-button">
                                                Изчерпано
                                            </a>
                                        }

                                        @if (product.IsWish)
                                        {
                                            <a asp-controller="Products" asp-action="RemoveFromWish" asp-route-id="@product.Id"
                                               method="post"
                                               class="float-end nav-link fs-3"
                                               style="color: rgb(var(--app-btn-bg))">
                                                <i class="fa fa-heart"></i>
                                            </a>
                                        }
                                        else
                                        {
                                            <a asp-controller="Products" asp-action="AddToWish" asp-route-id="@product.Id"
                                               method="post"
                                               class="float-end nav-link fs-3"
                                               style="color: rgb(var(--app-btn-bg))">
                                                <i class="far fa-heart"></i>
                                            </a>
                                        }
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- Products End-->
                }

                <!-- Pagination Start-->
                <div class="col-12">
                    <div class="pagination d-flex justify-content-center mt-5">
                        <a href="#" class="btn btn-inverce m-1">&laquo;</a>
                        <a href="#" class="btn active m-1">1</a>
                        <a href="#" class="btn btn-inverce m-1">2</a>
                        <a href="#" class="btn btn-inverce m-1">3</a>
                        <a href="#" class="btn btn-inverce m-1">4</a>
                        <a href="#" class="btn btn-inverce m-1">5</a>
                        <a href="#" class="btn btn-inverce m-1">6</a>
                        <a href="#" class="btn btn-inverce m-1">&raquo;</a>
                    </div>
                </div>
                <!-- Pagination End-->
            </div>
        </div>
    </div>
</div>

<!-- Back to Top -->
<a href="#" class="btn rounded-circle back-to-top">
    <i class="fa fa-arrow-up"></i>
</a>

@section Scripts {
    <script src="~/js/products.js"></script>
}